(()=>{"use strict";var e=".elements",t=".popup_profile",n=".popup_card",r=".popup__form_profile",o=".popup__form_card",i=".profile__name",u=".profile__character",c=".popup__button",a=".popup_image",s=".popup_avatar",l={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},f="elements__like-button_liked",p=document.querySelector(".page"),h=p.querySelector(t),y=h.querySelector(r),d=y.querySelector(c),_=p.querySelector(s).querySelector(".popup__form_avatar"),b=_.querySelector(c),v=p.querySelector(n),m=v.querySelector(o),g=m.querySelector(c),k=p.querySelector(".profile__cover"),S=p.querySelector(".profile__edit-button"),E=p.querySelector(".profile__add-button"),O=document.querySelector(a),w=(O.querySelector(".popup__img"),O.querySelector(".popup__caption"),h.querySelector(r)),j=(w.querySelector(".popup__input_user_name"),w.querySelector(".popup__input_user_character"),p.querySelector(i),p.querySelector(u),v.querySelector(o)),P=(j.querySelector(".popup__input_card_name"),j.querySelector(".popup__input_card_address"),j.querySelector(c),p.querySelector(e));function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._token="eacdcad8-b7be-4b95-a68d-d5be8d193107",this._baseUrl="https://mesto.nomoreparties.co/v1/cohort-51"}var t,n;return t=e,(n=[{key:"getInitialUser",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"setUser",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"setAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"setCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"delCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"dislikeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R="popup_opened",B=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),I(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),I(this,"_closePopupByClick",(function(e){var t=e.target;(t.classList.contains("cross")||t.classList.contains("cross__img")||t===n._popup)&&n.close()})),this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(R),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(R),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this._closePopupByClick)}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=A(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(this,arguments)}function A(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function N(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._form=t._popup.querySelector("form"),t}return t=u,(n=[{key:"setSubmitAction",value:function(e){this._submitHandlerDelete=e}},{key:"setEventListeners",value:function(){var e=this;x(V(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._submitHandlerDelete(t),e.close()}))}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(B);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=M(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},H.apply(this,arguments)}function M(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function K(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Q(r);if(o){var n=Q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return K(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleSubmitForm=t,n._input=n._popup.querySelector(".popup__input"),n._form=n._popup.querySelector("form"),n._userAvatar=document.querySelector(".profile__avatar"),n}return t=u,(n=[{key:"editAvatarFromApi",value:function(e){this._userAvatar.src=e}},{key:"setEventListeners",value:function(e){H(Q(u.prototype),"setEventListeners",this).call(this,e),this._popup.addEventListener("submit",this._handleSubmitForm)}},{key:"close",value:function(){H(Q(u.prototype),"close",this).call(this),this._form.reset()}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(B);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(){return Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=$(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Z.apply(this,arguments)}function $(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=re(e)););return e}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}function te(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=re(r);if(o){var n=re(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return te(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),oe(ne(n=i.call(this,e)),"getInputValues",(function(){return n._formValues={},n._inputList.forEach((function(e){n._formValues[e.name]=e.value})),n._formValues})),oe(ne(n),"setInputValues",(function(e){n._inputList.forEach((function(t){t.value=e[t.name]}))})),n._handleSubmitForm=t,n._inputList=n._popup.querySelectorAll(".popup__input"),n._form=n._popup.querySelector("form"),n}return t=u,(n=[{key:"setEventListeners",value:function(e){Z(re(u.prototype),"setEventListeners",this).call(this,e),this._popup.addEventListener("submit",this._handleSubmitForm)}},{key:"close",value:function(){Z(re(u.prototype),"close",this).call(this),this._form.reset()}}])&&Y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(B);function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(){return ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=se(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ae.apply(this,arguments)}function se(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pe(e)););return e}function le(e,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},le(e,t)}function fe(e,t){if(t&&("object"===ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pe(r);if(o){var n=pe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fe(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImgPicture=t._popup.querySelector(".popup__img"),t._captionOfPopupImg=t._popup.querySelector(".popup__caption"),t}return t=u,(n=[{key:"open",value:function(e,t){this._popupImgPicture.src=e,this._popupImgPicture.alt=t,this._captionOfPopupImg.textContent=t,ae(pe(u.prototype),"open",this).call(this)}}])&&ce(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(B);function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var de=function(){function e(t,n,r,o,i){var u=t.name,c=t.link,a=t._id,s=t.likes;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=u,this._link=c,this._id=a,this.likes=s,this._templateSelector=n,this.handleOpenBigImage=r,this.handleOpenPopupDelete=o,this.handleLike=i}var t,n;return t=e,(n=[{key:"_getCardElement",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".elements__element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._cardElement=this._getCardElement(),this.buttonLike=this._cardElement.querySelector(".elements__like-button"),this._buttonDel=this._cardElement.querySelector(".elements__trash"),this.likeCounter=this._cardElement.querySelector(".elements__like-counter"),this.elImg=this._cardElement.querySelector(".elements__image"),this.elImg.src=this._link,this.elImg.alt=this._name,this._cardElement.querySelector(".elements__name").textContent=this._name,this._setEventListeners(),this._cardElement}},{key:"_setEventListeners",value:function(){var e=this;this._buttonDel.addEventListener("click",(function(t){return e._handleDeleteClick()})),this.buttonLike.addEventListener("click",(function(t){return e._toggleLike()})),this.elImg.addEventListener("click",(function(t){return e._handleImageClick()}))}},{key:"deleteCard",value:function(){this._cardElement.remove()}},{key:"getCardId",value:function(){return this._id}},{key:"_toggleLike",value:function(){this.handleLike(this),this.buttonLike.classList.toggle("elements__like-button_liked")}},{key:"_handleImageClick",value:function(){this.handleOpenBigImage(this._link,this._name)}},{key:"_handleDeleteClick",value:function(){this.handleOpenPopupDelete(this)}}])&&ye(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var be=function(){function e(t,n){var r,o,i=this,u=t.formSelector,c=t.inputSelector,a=t.submitButtonSelector,s=t.inactiveButtonClass,l=t.inputErrorClass,f=t.errorClass;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(){return i._inputList.some((function(e){return!e.validity.valid}))},(r="_hasInvalidInput")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._formSelector=u,this._inputSelector=c,this._submitButtonSelector=a,this._inactiveButtonClass=s,this._inputErrorClass=l,this._errorClass=f,this._formEl=n}var t,n;return t=e,(n=[{key:"_showError",value:function(e,t){var n=this._formEl.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.classList.add(this._errorClass),n.textContent=t}},{key:"_hideError",value:function(e){var t=this._formEl.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e,e.validationMessage)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableButtonState():this.enableButtonState()}},{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formEl.querySelectorAll(this._inputSelector)),this._buttonElement=this._formEl.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(n){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"disableButtonState",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled","disabled")}},{key:"enableButtonState",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled")}},{key:"hideErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideError(t)}))}},{key:"enableValidation",value:function(){this._formEl.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&_e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var me=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.append(e)}},{key:"prependItem",value:function(e){this._container.prepend(e)}}])&&ve(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ke=function(){function e(t){var n=t.userNameSelector,r=t.userJobSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameNode=document.querySelector(n),this._userJobNode=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userName=this._userNameNode.textContent,this._userJob=this._userJobNode.textContent,this._userData={name:this._userName,about:this._userJob},this._userData}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._userNameNode.textContent=t,this._userJobNode.textContent=n}}])&&ge(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Se=new L;function Ee(e){return new de(e,"#card-template",Pe,Le,Oe).generateCard()}function Oe(e){e.buttonLike.classList.contains(f)?Se.dislikeCard(e.getCardId()).then((function(t){e.likeCounter.textContent=t.likes.length})).catch((function(e){console.log(e)})):Se.likeCard(e.getCardId()).then((function(t){e.likeCounter.textContent=t.likes.length})).catch((function(e){console.log(e)}))}Se.getInitialCards().then((function(e){Te.renderItems(e);for(var t=P.querySelectorAll("li"),n=0;n<e.length;n++)t[n].querySelector("span").textContent=e[n].likes.length;Se.getInitialUser().then((function(n){function r(e){var t=[];return e.forEach((function(e){t.push(e._id)})),t.some((function(e){return e===n._id}))}for(var o=0;o<e.length;o++)e[o].owner._id!==n._id&&t[o].querySelector(".elements__trash").remove(),r(e[o].likes)&&t[o].querySelector(".elements__like-button").classList.add(f)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})),Se.getInitialUser().then((function(e){we.setUserInfo(e),Re.editAvatarFromApi(e.avatar)})).catch((function(e){console.log(e)}));var we=new ke({userNameSelector:i,userJobSelector:u}),je=new he(a);function Pe(e,t){je.open(e,t)}je.setEventListeners();var Ce=new J(".popup_delete");function Le(e){Ce.setSubmitAction((function(){Se.delCard(e.getCardId()).catch((function(e){console.log(e)})),e.deleteCard()})),Ce.open()}function qe(e,t,n,r){t.textContent=e?n:r}Ce.setEventListeners();var Ie=new ie(t,(function(e){qe(!0,d,"Сохранение...","Сохранить"),Se.setUser(Ie.getInputValues()).then((function(e){we.setUserInfo(e)})).catch((function(e){console.log(e)})).finally((function(){qe(!1,d,"Сохранение...","Сохранить"),Ie.close()}))}));Ie.setEventListeners();var Re=new W(s,(function(e){e.preventDefault(),qe(!0,b,"Сохранение...","Сохранить"),Se.setAvatar(Re._input.value).then((function(e){Re.editAvatarFromApi(e.avatar)})).catch((function(e){console.log(e)})).finally((function(){qe(!1,b,"Сохранение...","Сохранить"),Re.close()}))}));Re.setEventListeners();var Be=new ie(n,(function(e){e.preventDefault(),qe(!0,g,"Создание...","Создать"),Se.setCard(Be.getInputValues()).then((function(e){Te.prependItem(Ee(e))})).catch((function(e){console.log(e)})).finally((function(){qe(!1,g,"Создание...","Создать"),Be.close()}))}));Be.setEventListeners();var Te=new me({renderer:function(e){var t=Ee(e);Te.addItem(t)}},e),De=new be(l,y);De.enableValidation();var xe=new be(l,m);xe.enableValidation();var Ae=new be(l,_);Ae.enableValidation(),S.addEventListener("click",(function(){Ie.open(),Ie.setInputValues(we.getUserInfo()),De.hideErrors()})),k.addEventListener("click",(function(){Re.open(),Ae.hideErrors(),Ae.disableButtonState()})),E.addEventListener("click",(function(){Be.open(),xe.hideErrors(),xe.disableButtonState()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TWpCLEdBQVksSUFBSWhDLEdBQ3BCLENBQ0VFLFNBQVUsU0FBQ0ksR0FDVCxJQUFNNkQsRUFBY2hELEdBQVdiLEdBQy9CMEIsR0FBVW9DLFFBQVFELEVBQ25CLEdBRUhuTixHQUlJcU4sR0FBdUIsSUFBSWxHLEdBQWNsSCxFQUFrQlksR0FDakV3TSxHQUFxQkMsbUJBQ3JCLElBQU1DLEdBQW9CLElBQUlwRyxHQUFjbEgsRUFBa0JpQixHQUM5RHFNLEdBQWtCRCxtQkFDbEIsSUFBTUUsR0FBc0IsSUFBSXJHLEdBQWNsSCxFQUFrQmMsR0FDaEV5TSxHQUFvQkYsbUJBR3BCak0sRUFBV3dDLGlCQUFpQixTQUFTLFdBQ25DOEksR0FBcUJYLE9BQ3JCVyxHQUFxQmMsZUFBZTlCLEdBQUsrQixlQUN6Q0wsR0FBcUJNLFlBQ3RCLElBR0R2TSxFQUFpQnlDLGlCQUFpQixTQUFTLFdBQ3pDZ0ksR0FBWUcsT0FDWndCLEdBQW9CRyxhQUNwQkgsR0FBb0JqRixvQkFDckIsSUFHRGpILEVBQVV1QyxpQkFBaUIsU0FBUyxXQUNsQ21KLEdBQWtCaEIsT0FDbEJ1QixHQUFrQkksYUFDbEJKLEdBQWtCaEYsb0JBQ25CLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwRGVsZXRlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBBdmF0YXIuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUGljdHVyZVBvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gIHBhZ2U6IFwiLnBhZ2VcIixcbiAgY2FyZEVsZW1lbnRzOiBcIi5lbGVtZW50c1wiLFxuICBlZGl0QnV0dG9uOiBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiLFxuICBhZGRCdXR0b246IFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIixcbiAgcG9wdXBQcm9maWxlOiBcIi5wb3B1cF9wcm9maWxlXCIsXG4gIHBvcHVwQ2FyZDogXCIucG9wdXBfY2FyZFwiLFxuICBmb3JtRWxlbWVudDogXCIucG9wdXBfX2NvbnRhaW5lclwiLFxuICBmb3JtUHJvZmlsZTogXCIucG9wdXBfX2Zvcm1fcHJvZmlsZVwiLFxuICBmb3JtQ2FyZDogXCIucG9wdXBfX2Zvcm1fY2FyZFwiLFxuICBmb3JtQ2FyZE5hbWVFcnJvcjogXCIuY2FyZC1uYW1lLWlucHV0LWVycm9yXCIsXG4gIGZvcm1DYXJkTGlua0Vycm9yOiBcIi5jYXJkLWFkZHJlc3MtaW5wdXQtZXJyb3JcIixcbiAgbmFtZUlucHV0OiBcIi5wb3B1cF9faW5wdXRfdXNlcl9uYW1lXCIsXG4gIGpvYklucHV0OiBcIi5wb3B1cF9faW5wdXRfdXNlcl9jaGFyYWN0ZXJcIixcbiAgcHJvZmlsZU5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgcHJvZmlsZUNoYXJhY3RlcjogXCIucHJvZmlsZV9fY2hhcmFjdGVyXCIsXG4gIGZvcm1FbGVtZW50Q2FyZDogXCIucG9wdXBfX2NvbnRhaW5lclwiLFxuICBuYW1lQ2FyZDogXCIucG9wdXBfX2lucHV0X2NhcmRfbmFtZVwiLFxuICBsaW5rQ2FyZDogXCIucG9wdXBfX2lucHV0X2NhcmRfYWRkcmVzc1wiLFxuICBwb3B1cDogXCIucG9wdXBcIixcbiAgcG9wdXBPcGVuZWQ6IFwicG9wdXBfb3BlbmVkXCIsXG4gIHBvcHVwT3BlbmVkQ2xhc3M6IFwiLnBvcHVwX29wZW5lZFwiLFxuICBjcm9zczogXCJjcm9zc1wiLFxuICBjcm9zc0ltZzogXCJjcm9zc19faW1nXCIsXG4gIGVsZW1lbnRzSW1hZ2VDbGFzczogXCJlbGVtZW50c19faW1hZ2VcIixcbiAgZWxlbWVudHNUcmFzaENsYXNzOiBcImVsZW1lbnRzX190cmFzaFwiLFxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbiAgcG9wdXBEZWxldGU6IFwiLnBvcHVwX2RlbGV0ZVwiLFxuICBwb3B1cEltZzogXCIucG9wdXBfaW1hZ2VcIixcbiAgcG9wdXBJbWFnZTogXCIucG9wdXBfX2ltZ1wiLFxuICBwb3B1cENhcHRpb246IFwiLnBvcHVwX19jYXB0aW9uXCIsXG4gIHBvcHVwQXZhdGFyOiBcIi5wb3B1cF9hdmF0YXJcIixcbiAgYXZhdGFyRm9ybTogXCIucG9wdXBfX2Zvcm1fYXZhdGFyXCIsXG4gIGF2YXRhckVkaXRCdXR0b246IFwiLnByb2ZpbGVfX2NvdmVyXCIsXG59O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbk9iamVjdCA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzT2ZDYXJkID0ge1xuICBjYXJkRWxlbWVudDogXCIuZWxlbWVudHNfX2VsZW1lbnRcIixcbiAgZWxlbWVudHNJbWFnZTogXCIuZWxlbWVudHNfX2ltYWdlXCIsXG4gIGVsZW1lbnRzTmFtZTogXCIuZWxlbWVudHNfX25hbWVcIixcbiAgYnV0dG9uTGlrZTogXCIuZWxlbWVudHNfX2xpa2UtYnV0dG9uXCIsXG4gIGJ1dHRvbkRlbDogXCIuZWxlbWVudHNfX3RyYXNoXCIsXG4gIGxpa2VkOiBcImVsZW1lbnRzX19saWtlLWJ1dHRvbl9saWtlZFwiLFxuICBsaWtlQ291bnRlcjogXCIuZWxlbWVudHNfX2xpa2UtY291bnRlclwiLFxufTtcblxuZXhwb3J0IGNvbnN0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wYWdlKTsgLy8g0JrQvtC90YLQtdC50L3QtdGAINGB0YLRgNCw0L3QuNGG0YtcblxuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZSA9IHJvb3QucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wdXBQcm9maWxlKTsgLy8g0L/QvtC/0LDQvyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBwb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuZm9ybVByb2ZpbGUpOyAvLyDQpNC+0YDQvNCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cbmV4cG9ydCBjb25zdCBwcm9maWxlQnV0dG9uRWxlbWVudCA9IHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTsgLy8g0LrQvdC+0L/QutCwINC+0YLQv9GA0LDQstC60Lgg0L/RgNC+0YTQuNC70Y9cblxuZXhwb3J0IGNvbnN0IGF2YXRhclBvcHVwID0gcm9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3B1cEF2YXRhcik7IC8vINCf0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQsNCy0LDRgtCw0YDQsFxuZXhwb3J0IGNvbnN0IGF2YXRhckZvcm0gPSBhdmF0YXJQb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5hdmF0YXJGb3JtKTsgLy8g0KTQvtGA0LzQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINCw0LLQsNGC0LDRgNCwXG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybUJ1dHRvbiA9IGF2YXRhckZvcm0ucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpOyAvLyDQmtC90L7Qv9C60LAg0L7RgtC/0YDQsNCy0LrQuCDQsNCy0LDRgtCw0YDQsFxuXG5leHBvcnQgY29uc3QgcG9wdXBDYXJkID0gcm9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3B1cENhcmQpOyAvLyDQv9C+0L/QsNC/INC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbmV4cG9ydCBjb25zdCBjYXJkRm9ybSA9IHBvcHVwQ2FyZC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5mb3JtQ2FyZCk7IC8vINCk0L7RgNC80LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuZXhwb3J0IGNvbnN0IGNhcmRGb3JtQnV0dG9uID0gY2FyZEZvcm0ucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpOyAvLyDQmtC90L7Qv9C60LAg0L7RgtC/0YDQsNCy0LrQuCDQutCw0YDRgtC+0YfQutC4XG5cbmV4cG9ydCBjb25zdCBidXR0b25BdmF0YXJFZGl0ID0gcm9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5hdmF0YXJFZGl0QnV0dG9uKTsgLy8g0LrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LBcbmV4cG9ydCBjb25zdCBidXR0b25FZGl0ID0gcm9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5lZGl0QnV0dG9uKTsgLy8g0LrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cbmV4cG9ydCBjb25zdCBidXR0b25BZGQgPSByb290LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmFkZEJ1dHRvbik7IC8vINC60L3QvtC/0LrQsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5leHBvcnQgY29uc3QgcG9wdXBJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3B1cEltZyk7IC8vINC/0L7Qv9Cw0L8g0LrQsNGA0YLQuNC90LrQuFxuZXhwb3J0IGNvbnN0IHBvcHVwSW1nUGljdHVyZSA9IHBvcHVwSW1nLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcHVwSW1hZ2UpOyAvLyDRgdCw0LzQsCDQutCw0YDRgtC40L3QutCwXG5leHBvcnQgY29uc3QgY2FwdGlvbk9mUG9wdXBJbWcgPSBwb3B1cEltZy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3B1cENhcHRpb24pOyAvLyDQv9C+0LTQv9C40YHRjCDQutCw0YDRgtC40L3QutC4XG5leHBvcnQgY29uc3QgZm9ybUVsZW1lbnRQcm9maWxlID0gcG9wdXBQcm9maWxlLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmZvcm1Qcm9maWxlKTsgLy8g0KTQvtGA0LzQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZm9ybUVsZW1lbnRQcm9maWxlLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLm5hbWVJbnB1dCk7IC8vINCd0LDRhdC+0LTQuNC8INC/0L7Qu9GPINGE0L7RgNC80YtcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IGZvcm1FbGVtZW50UHJvZmlsZS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5qb2JJbnB1dCk7IC8vINCd0LDRhdC+0LTQuNC8INC/0L7Qu9GPINGE0L7RgNC80YtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IHJvb3QucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucHJvZmlsZU5hbWUpOyAvLyDQndCw0YXQvtC00LjQvCDRjdC70LXQvNC10L3RgtGLLCDQvtGC0LrRg9C00LAg0LTQvtC70LbQvdGLINCx0YvRgtGMINCy0YHRgtCw0LLQu9C10L3RiyDQt9C90LDRh9C10L3QuNGPINC/0L7Qu9C10LlcbmV4cG9ydCBjb25zdCBwcm9maWxlQ2hhcmFjdGVyID0gcm9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wcm9maWxlQ2hhcmFjdGVyKTsgLy8g0J3QsNGF0L7QtNC40Lwg0Y3Qu9C10LzQtdC90YLRiywg0L7RgtC60YPQtNCwINC00L7Qu9C20L3RiyDQsdGL0YLRjCDQstGB0YLQsNCy0LvQtdC90Ysg0LfQvdCw0YfQtdC90LjRjyDQv9C+0LvQtdC5XG5leHBvcnQgY29uc3QgZm9ybUVsZW1lbnRDYXJkID0gcG9wdXBDYXJkLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmZvcm1DYXJkKTsgLy8g0KTQvtGA0LzQsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5leHBvcnQgY29uc3QgbmFtZUNhcmQgPSBmb3JtRWxlbWVudENhcmQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMubmFtZUNhcmQpOyAvLyDQndCw0YXQvtC00LjQvCDQv9C+0LvRjyDRhNC+0YDQvNGLINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbmV4cG9ydCBjb25zdCBsaW5rQ2FyZCA9IGZvcm1FbGVtZW50Q2FyZC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5saW5rQ2FyZCk7IC8vINCd0LDRhdC+0LTQuNC8INC/0L7Qu9GPINGE0L7RgNC80Ysg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuZXhwb3J0IGNvbnN0IGNhcmRCdXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnRDYXJkLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTsgLy8g0J3QsNGF0L7QtNC40Lwg0LrQvdC+0L/QutGDINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lciA9IHJvb3QucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuY2FyZEVsZW1lbnRzKTsgLy8g0JrQvtC90YLQtdC50L3QtdGAINC60LDRgNGC0L7Rh9C10LpcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX3Rva2VuID0gXCJlYWNkY2FkOC1iN2JlLTRiOTUtYTY4ZC1kNWJlOGQxOTMxMDdcIjtcbiAgICB0aGlzLl9iYXNlVXJsID0gXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTUxXCI7XG4gIH1cblxuICBnZXRJbml0aWFsVXNlcigpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxuICAgICAgfSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcbiAgICAgIH0sXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0VXNlcih7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBzZXRBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGF2YXRhcixcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIC8vINC10YHQu9C4INC+0YjQuNCx0LrQsCwg0L7RgtC60LvQvtC90Y/QtdC8INC/0YDQvtC80LjRgVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBsaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsQ2FyZChfaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtfaWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcbiAgICAgIH0sXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgLy8g0LXRgdC70Lgg0L7RiNC40LHQutCwLCDQvtGC0LrQu9C+0L3Rj9C10Lwg0L/RgNC+0LzQuNGBXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgbGlrZUNhcmQoX2lkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7X2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXG4gICAgICB9LFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIC8vINC10YHQu9C4INC+0YjQuNCx0LrQsCwg0L7RgtC60LvQvtC90Y/QtdC8INC/0YDQvtC80LjRgVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2xpa2VDYXJkKF9pZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke19pZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxuICAgICAgfSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICAvLyDQtdGB0LvQuCDQvtGI0LjQsdC60LAsINC+0YLQutC70L7QvdGP0LXQvCDQv9GA0L7QvNC40YFcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImNvbnN0IHBvcHVwU2VsZWN0b3JzID0ge1xuICBwb3B1cDogXCIucG9wdXBcIixcbiAgcG9wdXBPcGVuZWQ6IFwicG9wdXBfb3BlbmVkXCIsXG4gIGNyb3NzOiBcImNyb3NzXCIsXG4gIGNyb3NzSW1nOiBcImNyb3NzX19pbWdcIixcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChwb3B1cFNlbGVjdG9ycy5wb3B1cE9wZW5lZCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShwb3B1cFNlbGVjdG9ycy5wb3B1cE9wZW5lZCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9jbG9zZVBvcHVwQnlDbGljayk7XG4gIH1cblxuICBfY2xvc2VQb3B1cEJ5Q2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcblxuICAgIGlmIChcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMocG9wdXBTZWxlY3RvcnMuY3Jvc3MpIHx8XG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHBvcHVwU2VsZWN0b3JzLmNyb3NzSW1nKSB8fFxuICAgICAgdGFyZ2V0ID09PSB0aGlzLl9wb3B1cFxuICAgICkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cERlbGV0ZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcbiAgfVxuXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcbiAgICB0aGlzLl9zdWJtaXRIYW5kbGVyRGVsZXRlID0gYWN0aW9uO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXJEZWxldGUoZXZlbnQpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY29uc3QgcG9wdXBBdmF0YXJTZWxlY3RvcnMgPSB7XG4gIHVzZXJBdmF0YXI6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwQXZhdGFyIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSA9IGhhbmRsZVN1Ym1pdEZvcm07XG4gICAgdGhpcy5faW5wdXQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHBvcHVwQXZhdGFyU2VsZWN0b3JzLmlucHV0U2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cEF2YXRhclNlbGVjdG9ycy51c2VyQXZhdGFyKTtcbiAgfVxuXG4gIGVkaXRBdmF0YXJGcm9tQXBpKGxpbmspIHtcbiAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IGxpbms7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycyhldnQpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycyhldnQpO1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jb25zdCBwb3B1cFdpdGhGb3JtU2VsZWN0b3JzID0ge1xuICBwb3B1cFByb2ZpbGU6IFwiLnBvcHVwX3Byb2ZpbGVcIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSA9IGhhbmRsZVN1Ym1pdEZvcm07XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIHBvcHVwV2l0aEZvcm1TZWxlY3RvcnMuaW5wdXRTZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICB9XG5cbiAgZ2V0SW5wdXRWYWx1ZXMgPSAoKSA9PiB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9O1xuXG4gIHNldElucHV0VmFsdWVzID0gKGRhdGEpID0+IHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycyhldnQpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycyhldnQpO1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNvbnN0IHBpY3R1cmVQb3B1cFNlbGVjdG9ycyA9IHtcbiAgcG9wdXBJbWFnZTogXCIucG9wdXBfX2ltZ1wiLFxuICBwb3B1cENhcHRpb246IFwiLnBvcHVwX19jYXB0aW9uXCIsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQaWN0dXJlUG9wdXAgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltZ1BpY3R1cmUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFxuICAgICAgcGljdHVyZVBvcHVwU2VsZWN0b3JzLnBvcHVwSW1hZ2VcbiAgICApO1xuICAgIHRoaXMuX2NhcHRpb25PZlBvcHVwSW1nID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcbiAgICAgIHBpY3R1cmVQb3B1cFNlbGVjdG9ycy5wb3B1cENhcHRpb25cbiAgICApO1xuICB9XG5cbiAgb3BlbihsaW5rLCBuYW1lKSB7XG4gICAgdGhpcy5fcG9wdXBJbWdQaWN0dXJlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBJbWdQaWN0dXJlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fY2FwdGlvbk9mUG9wdXBJbWcudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiY29uc3Qgc2VsZWN0b3JzT2ZDYXJkID0ge1xuICBjYXJkRWxlbWVudDogXCIuZWxlbWVudHNfX2VsZW1lbnRcIixcbiAgZWxlbWVudHNJbWFnZTogXCIuZWxlbWVudHNfX2ltYWdlXCIsXG4gIGVsZW1lbnRzTmFtZTogXCIuZWxlbWVudHNfX25hbWVcIixcbiAgYnV0dG9uTGlrZTogXCIuZWxlbWVudHNfX2xpa2UtYnV0dG9uXCIsXG4gIGJ1dHRvbkRlbDogXCIuZWxlbWVudHNfX3RyYXNoXCIsXG4gIGxpa2VkOiBcImVsZW1lbnRzX19saWtlLWJ1dHRvbl9saWtlZFwiLFxuICBsaWtlQ291bnRlcjogXCIuZWxlbWVudHNfX2xpa2UtY291bnRlclwiLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHsgbmFtZSwgbGluaywgX2lkLCBsaWtlcyB9LFxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlT3BlbkJpZ0ltYWdlLFxuICAgIGhhbmRsZU9wZW5Qb3B1cERlbGV0ZSxcbiAgICBoYW5kbGVMaWtlXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2lkID0gX2lkO1xuICAgIHRoaXMubGlrZXMgPSBsaWtlcztcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcbiAgICB0aGlzLmhhbmRsZU9wZW5CaWdJbWFnZSA9IGhhbmRsZU9wZW5CaWdJbWFnZTtcbiAgICB0aGlzLmhhbmRsZU9wZW5Qb3B1cERlbGV0ZSA9IGhhbmRsZU9wZW5Qb3B1cERlbGV0ZTtcbiAgICB0aGlzLmhhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xuICB9XG5cbiAgX2dldENhcmRFbGVtZW50KCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc09mQ2FyZC5jYXJkRWxlbWVudClcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRDYXJkRWxlbWVudCgpO1xuICAgIHRoaXMuYnV0dG9uTGlrZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBzZWxlY3RvcnNPZkNhcmQuYnV0dG9uTGlrZVxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRGVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHNlbGVjdG9yc09mQ2FyZC5idXR0b25EZWxcbiAgICApO1xuICAgIHRoaXMubGlrZUNvdW50ZXIgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgc2VsZWN0b3JzT2ZDYXJkLmxpa2VDb3VudGVyXG4gICAgKTtcbiAgICB0aGlzLmVsSW1nID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNPZkNhcmQuZWxlbWVudHNJbWFnZSk7XG4gICAgdGhpcy5lbEltZy5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuZWxJbWcuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc09mQ2FyZC5lbGVtZW50c05hbWUpLnRleHRDb250ZW50ID1cbiAgICAgIHRoaXMuX25hbWU7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fYnV0dG9uRGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoXykgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2soKSk7XG4gICAgdGhpcy5idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoXykgPT4gdGhpcy5fdG9nZ2xlTGlrZSgpKTtcbiAgICB0aGlzLmVsSW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoXykgPT4gdGhpcy5faGFuZGxlSW1hZ2VDbGljaygpKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICBnZXRDYXJkSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG5cbiAgX3RvZ2dsZUxpa2UoKSB7XG4gICAgdGhpcy5oYW5kbGVMaWtlKHRoaXMpO1xuICAgIHRoaXMuYnV0dG9uTGlrZS5jbGFzc0xpc3QudG9nZ2xlKHNlbGVjdG9yc09mQ2FyZC5saWtlZCk7XG4gIH1cblxuICBfaGFuZGxlSW1hZ2VDbGljaygpIHtcbiAgICB0aGlzLmhhbmRsZU9wZW5CaWdJbWFnZSh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVDbGljaygpIHtcbiAgICB0aGlzLmhhbmRsZU9wZW5Qb3B1cERlbGV0ZSh0aGlzKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHtcbiAgICAgIGZvcm1TZWxlY3RvcixcbiAgICAgIGlucHV0U2VsZWN0b3IsXG4gICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcixcbiAgICAgIGluYWN0aXZlQnV0dG9uQ2xhc3MsXG4gICAgICBpbnB1dEVycm9yQ2xhc3MsXG4gICAgICBlcnJvckNsYXNzLFxuICAgIH0sXG4gICAgZm9ybUVsXG4gICkge1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBpbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWwgPSBmb3JtRWw7XG4gIH1cbiAgLy8g0JzQtdGC0L7QtCDQstGL0LLQvtC00LAg0YHQvtC+0LHRidC10L3QuNGPINC+0LEg0L7RiNC40LHQutC1XG4gIF9zaG93RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gIH1cbiAgLy8g0JzQtdGC0L7QtCDRgdC60YDRi9GC0LjRjyDRgdC+0L7QsdGJ0LXQvdC40Y8g0L7QsSDQvtGI0LjQsdC60LVcbiAgX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG4gIC8vINCc0LXRgtC+0LQg0L/QtdGA0LXQutC70Y7Rh9C10L3QuNGPINCy0LjQtNC40LzQvtGB0YLQuCDQvtGI0LjQsdC60Lgg0LIg0LfQsNCy0LjRgdC40LzQvtGB0YLQuCDQvtGCINCy0LDQu9C40LTQvdC+0YHRgtC4INC40L3Qv9GD0YLQsFxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuICAvLyDQnNC10YLQvtC0INC/0YDQvtCy0LXRgNC60Lgg0LXRgdGC0Ywg0LvQuCDRhdC+0YLRjCDQvtC00LjQvSDQvdC10LLQsNC70LjQtNC90YvQuSDQuNC90L/Rg9GCXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9O1xuICAvLyDQnNC10YLQvtC0INC/0LXRgNC10LrQu9GO0YfQtdC90LjRjyDQutC90L7Qv9C60Lgg0LIg0LfQsNCy0LjRgdC40LzQvtGB0YLQuCDQvtGCINC/0YDQtdC00YvQtNGD0YnQtdC5INC/0YDQvtCy0LXRgNC60LhcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uU3RhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbmFibGVCdXR0b25TdGF0ZSgpO1xuICAgIH1cbiAgfVxuICAvLyDQnNC10YLQvtC0INGA0LDQt9Cy0LXRiNC40LLQsNC90LjRjyDQstGB0LXQs9C+INCy0YvRiNC1INC90LAg0LLRgdC1INC40L3Qv9GD0YLRiyDQsiDRhNC+0YDQvNC1XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcblxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChfKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgLy8g0JzQtdGC0L7QtCDQvtGC0LrQu9GO0YfQtdC90LjRjyDQutC90L7Qv9C60LhcbiAgZGlzYWJsZUJ1dHRvblN0YXRlKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4gIH1cbiAgLy8g0JzQtdGC0L7QtCDQstC60LvRjtGH0LXQvdC40Y8g0LrQvdC+0L/QutC4XG4gIGVuYWJsZUJ1dHRvblN0YXRlKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICB9XG5cbiAgLy8g0J/Rg9Cx0LvQuNGH0L3Ri9C5INGB0LrRgNGL0YLQuNGPINC+0YjQuNCx0L7QulxuICBoaWRlRXJyb3JzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG4gIC8vINCc0LXRgtC+0LQg0L/RgNC+0LLQtdGA0LrQuCDRhNC+0YDQvNGLXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gIH1cblxuICBwcmVwZW5kSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VySm9iU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlckpvYk5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2JTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICB0aGlzLl91c2VyTmFtZSA9IHRoaXMuX3VzZXJOYW1lTm9kZS50ZXh0Q29udGVudDtcbiAgICB0aGlzLl91c2VySm9iID0gdGhpcy5fdXNlckpvYk5vZGUudGV4dENvbnRlbnQ7XG4gICAgdGhpcy5fdXNlckRhdGEgPSB7XG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZSxcbiAgICAgIGFib3V0OiB0aGlzLl91c2VySm9iLFxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy5fdXNlckRhdGE7XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZU5vZGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3VzZXJKb2JOb2RlLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbmltcG9ydCB7XG4gIHNlbGVjdG9ycyxcbiAgdmFsaWRhdGlvbk9iamVjdCxcbiAgc2VsZWN0b3JzT2ZDYXJkLFxuICBwcm9maWxlRm9ybSxcbiAgY2FyZEZvcm0sXG4gIGF2YXRhckZvcm0sXG4gIGJ1dHRvbkF2YXRhckVkaXQsXG4gIGJ1dHRvbkVkaXQsXG4gIGJ1dHRvbkFkZCxcbiAgY2FyZHNDb250YWluZXIsXG4gIHByb2ZpbGVCdXR0b25FbGVtZW50LFxuICBhdmF0YXJGb3JtQnV0dG9uLFxuICBjYXJkRm9ybUJ1dHRvbixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IFBvcHVwRGVsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwRGVsZXRlLmpzXCI7XG5pbXBvcnQgUG9wdXBBdmF0YXIgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBBdmF0YXIuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQaWN0dXJlUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUGljdHVyZVBvcHVwLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuLy8gQVBJXG5jb25zdCBhcGkgPSBuZXcgQXBpKCk7XG4vLyDQl9Cw0LPRgNGD0LfQutCwINC90LDRh9Cw0LvRjNC90YvRhSDQutCw0YDRgtC+0YfQtdC6XG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICBjYXJkc0xpc3QucmVuZGVySXRlbXMocmVzdWx0KTsgLy8g0LLRgdGC0LDQstC60LAg0LrQsNGA0YLQvtGH0LXQulxuICAgIGNvbnN0IGNhcmRzTm9kZUxpc3QgPSBjYXJkc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwibGlcIik7IC8vINCy0YHRgtCw0LLQutCwINC70LDQudC60L7QslxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjYXJkc05vZGVMaXN0W2ldLnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpLnRleHRDb250ZW50ID1cbiAgICAgICAgcmVzdWx0W2ldLmxpa2VzLmxlbmd0aDtcbiAgICB9XG4gICAgLy8g0L/RgNC+0LLQtdGA0LrQsCDRgdCy0L7QuNGFINC60LDRgNGC0L7Rh9C10LpcbiAgICBhcGlcbiAgICAgIC5nZXRJbml0aWFsVXNlcigpXG4gICAgICAudGhlbigodXNlclJlc3VsdCkgPT4ge1xuICAgICAgICAvLyDQu9Cw0LnQutC90YPRgtCwINC70Lgg0LzQvdC+0LlcbiAgICAgICAgZnVuY3Rpb24gaXNMaWtlZChhcnJheSkge1xuICAgICAgICAgIGxldCBhcnJheU9mTGlrZWRJZCA9IFtdO1xuICAgICAgICAgIGFycmF5LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGFycmF5T2ZMaWtlZElkLnB1c2goZWxlbWVudC5faWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IGNvbnRhaW5zVXNlcklkID0gYXJyYXlPZkxpa2VkSWQuc29tZShcbiAgICAgICAgICAgIChlbGVtZW50KSA9PiBlbGVtZW50ID09PSB1c2VyUmVzdWx0Ll9pZFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGNvbnRhaW5zVXNlcklkO1xuICAgICAgICB9IC8vINC70LDQudC60L3Rg9GC0LAg0LvQuCDQvNC90L7QuSAvL1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8g0LTQu9GPINGD0LTQsNC70LXQvdC40Y9cbiAgICAgICAgICBpZiAocmVzdWx0W2ldLm93bmVyLl9pZCAhPT0gdXNlclJlc3VsdC5faWQpIHtcbiAgICAgICAgICAgIGNhcmRzTm9kZUxpc3RbaV0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdHJhc2hcIikucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vINC00LvRjyDQu9Cw0LnQutC+0LJcbiAgICAgICAgICBpZiAoaXNMaWtlZChyZXN1bHRbaV0ubGlrZXMpKSB7XG4gICAgICAgICAgICBjYXJkc05vZGVMaXN0W2ldXG4gICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc09mQ2FyZC5idXR0b25MaWtlKVxuICAgICAgICAgICAgICAuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnNPZkNhcmQubGlrZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vINCy0YvQstC10LTQtdC8INC+0YjQuNCx0LrRgyDQsiDQutC+0L3RgdC+0LvRjFxuICAgICAgfSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gIH0pO1xuLy8g0JfQsNCz0YDRg9C30LrQsCDQvdCw0YfQsNC70YzQvdGL0YUg0LrQsNGA0YLQvtGH0LXQuiAvL1xuLy8g0JfQsNCz0YDRg9C30LrQsCDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y9cbmFwaVxuICAuZ2V0SW5pdGlhbFVzZXIoKVxuICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgdXNlci5zZXRVc2VySW5mbyhyZXN1bHQpO1xuICAgIHBvcHVwQXZhdGFyLmVkaXRBdmF0YXJGcm9tQXBpKHJlc3VsdC5hdmF0YXIpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7IC8vINCy0YvQstC10LTQtdC8INC+0YjQuNCx0LrRgyDQsiDQutC+0L3RgdC+0LvRjFxuICB9KTtcblxuLy8g0KTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGl0ZW0sXG4gICAgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSxcbiAgICBoYW5kbGVPcGVuQmlnSW1hZ2UsXG4gICAgaGFuZGxlT3BlblBvcHVwRGVsZXRlLFxuICAgIGhhbmRsZUxpa2VcbiAgKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbi8vINC70LDQudC60LhcbmZ1bmN0aW9uIGhhbmRsZUxpa2UoY2FyZCkge1xuICBpZiAoY2FyZC5idXR0b25MaWtlLmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcnNPZkNhcmQubGlrZWQpKSB7XG4gICAgYXBpXG4gICAgICAuZGlzbGlrZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgY2FyZC5saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHJlc3VsdC5saWtlcy5sZW5ndGg7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBhcGlcbiAgICAgIC5saWtlQ2FyZChjYXJkLmdldENhcmRJZCgpKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBjYXJkLmxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gcmVzdWx0Lmxpa2VzLmxlbmd0aDtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDQstGL0LLQtdC00LXQvCDQvtGI0LjQsdC60YMg0LIg0LrQvtC90YHQvtC70YxcbiAgICAgIH0pO1xuICB9XG59XG5cbi8vINCu0LfQtdGAXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWVTZWxlY3Rvcjogc2VsZWN0b3JzLnByb2ZpbGVOYW1lLFxuICB1c2VySm9iU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlQ2hhcmFjdGVyLFxufSk7XG5cbi8vINCf0L7Qv9Cw0L/RiyAvL1xuLy8g0L/QvtC/0LDQvyDRgSDQutCw0YDRgtC40L3QutC+0LlcbmNvbnN0IHBpY3R1cmVQb3B1cCA9IG5ldyBQaWN0dXJlUG9wdXAoc2VsZWN0b3JzLnBvcHVwSW1nKTtcbnBpY3R1cmVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZnVuY3Rpb24gaGFuZGxlT3BlbkJpZ0ltYWdlKGxpbmssIG5hbWUpIHtcbiAgcGljdHVyZVBvcHVwLm9wZW4obGluaywgbmFtZSk7XG59XG4vLyDQv9C+0L/QsNC/INGD0LTQsNC70LXQvdC40Y8g0LrQsNGC0L7Rh9C60LhcbmNvbnN0IHBvcHVwRGVsZXRlID0gbmV3IFBvcHVwRGVsZXRlKHNlbGVjdG9ycy5wb3B1cERlbGV0ZSk7XG5wb3B1cERlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xuZnVuY3Rpb24gaGFuZGxlT3BlblBvcHVwRGVsZXRlKGNhcmQpIHtcbiAgcG9wdXBEZWxldGUuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcbiAgICBhcGkuZGVsQ2FyZChjYXJkLmdldENhcmRJZCgpKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDQstGL0LLQtdC00LXQvCDQvtGI0LjQsdC60YMg0LIg0LrQvtC90YHQvtC70YxcbiAgICB9KTtcbiAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgfSk7XG4gIHBvcHVwRGVsZXRlLm9wZW4oKTtcbn1cblxuLy8g0KPQu9GD0YfRiNC10L3QuNC1IFVYXG5mdW5jdGlvbiByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgYnV0dG9uLCB0ZXh0aW5nLCB0ZXh0KSB7XG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSB0ZXh0aW5nO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH1cbn1cblxuLy8g0L/QvtC/0LDQvyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5jb25zdCBwb3B1cFdpdGhGb3JtUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5wb3B1cFByb2ZpbGUsIChfKSA9PiB7XG4gIHJlbmRlckxvYWRpbmcodHJ1ZSwgcHJvZmlsZUJ1dHRvbkVsZW1lbnQsIFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIiwgXCLQodC+0YXRgNCw0L3QuNGC0YxcIik7XG4gIGFwaVxuICAgIC5zZXRVc2VyKHBvcHVwV2l0aEZvcm1Qcm9maWxlLmdldElucHV0VmFsdWVzKCkpXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgdXNlci5zZXRVc2VySW5mbyhyZXN1bHQpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vINCy0YvQstC10LTQtdC8INC+0YjQuNCx0LrRgyDQsiDQutC+0L3RgdC+0LvRjFxuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgcHJvZmlsZUJ1dHRvbkVsZW1lbnQsIFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIiwgXCLQodC+0YXRgNCw0L3QuNGC0YxcIik7XG4gICAgICBwb3B1cFdpdGhGb3JtUHJvZmlsZS5jbG9zZSgpO1xuICAgIH0pO1xufSk7XG5wb3B1cFdpdGhGb3JtUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyDQv9C+0L/QsNC/INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LBcbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwQXZhdGFyKHNlbGVjdG9ycy5wb3B1cEF2YXRhciwgKGV2ZW50KSA9PiB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHJlbmRlckxvYWRpbmcodHJ1ZSwgYXZhdGFyRm9ybUJ1dHRvbiwgXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiLCBcItCh0L7RhdGA0LDQvdC40YLRjFwiKTtcbiAgYXBpXG4gICAgLnNldEF2YXRhcihwb3B1cEF2YXRhci5faW5wdXQudmFsdWUpXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgcG9wdXBBdmF0YXIuZWRpdEF2YXRhckZyb21BcGkocmVzdWx0LmF2YXRhcik7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBhdmF0YXJGb3JtQnV0dG9uLCBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCIsIFwi0KHQvtGF0YDQsNC90LjRgtGMXCIpO1xuICAgICAgcG9wdXBBdmF0YXIuY2xvc2UoKTtcbiAgICB9KTtcbn0pO1xucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8g0L/QvtC/0LDQvyDRgdC+0LfQtNCw0L3QuNGPINC60LDRgNGC0L7Rh9C60LggY2FyZEZvcm1CdXR0b25cbmNvbnN0IHBvcHVwV2l0aEZvcm1DYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLnBvcHVwQ2FyZCwgKGV2dCkgPT4ge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcmVuZGVyTG9hZGluZyh0cnVlLCBjYXJkRm9ybUJ1dHRvbiwgXCLQodC+0LfQtNCw0L3QuNC1Li4uXCIsIFwi0KHQvtC30LTQsNGC0YxcIik7XG4gIGFwaVxuICAgIC5zZXRDYXJkKHBvcHVwV2l0aEZvcm1DYXJkLmdldElucHV0VmFsdWVzKCkpXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgY2FyZHNMaXN0LnByZXBlbmRJdGVtKGNyZWF0ZUNhcmQocmVzdWx0KSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBjYXJkRm9ybUJ1dHRvbiwgXCLQodC+0LfQtNCw0L3QuNC1Li4uXCIsIFwi0KHQvtC30LTQsNGC0YxcIik7XG4gICAgICBwb3B1cFdpdGhGb3JtQ2FyZC5jbG9zZSgpO1xuICAgIH0pO1xufSk7XG5cbnBvcHVwV2l0aEZvcm1DYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vINGB0L7Qt9C00LDQvdC40LUg0L3QsNGH0LDQu9GM0L3Ri9GFINC60LDRgNGC0L7Rh9C10LpcbmNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICBjYXJkc0xpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgc2VsZWN0b3JzLmNhcmRFbGVtZW50c1xuKTtcblxuLy8g0KHQvtC30LTQsNC10Lwg0LTQu9GPINC60LDQttC00L7QuSDQv9GA0L7QstC10YDRj9C10LzQvtC5INGE0L7RgNC80Ysg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCBGb3JtVmFsaWRhdG9yLlxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uT2JqZWN0LCBwcm9maWxlRm9ybSk7XG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7IC8vINCX0LDQv9GD0YHQutCw0LXQvCDQstCw0LvQuNC00LDRhtC40Y5cbmNvbnN0IGNhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbk9iamVjdCwgY2FyZEZvcm0pO1xuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyAvLyDQl9Cw0L/Rg9GB0LrQsNC10Lwg0LLQsNC70LjQtNCw0YbQuNGOXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbk9iamVjdCwgYXZhdGFyRm9ybSk7XG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsgLy8g0JfQsNC/0YPRgdC60LDQtdC8INCy0LDQu9C40LTQsNGG0LjRjlxuXG4vLyDQntGC0LrRgNGL0LLQsNC10Lwg0L/QvtC/0LDQvyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPINC/0L4g0LrQu9C40LrRgyDQvdCwINC60L3QvtC/0LrRg1xuYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cFdpdGhGb3JtUHJvZmlsZS5vcGVuKCk7IC8vINCe0YLQutGA0YvQstCw0LXQvCDQv9C+0L/QsNC/XG4gIHBvcHVwV2l0aEZvcm1Qcm9maWxlLnNldElucHV0VmFsdWVzKHVzZXIuZ2V0VXNlckluZm8oKSk7IC8vINCX0LDQv9C+0LvQvdGP0LXQvCDQuNC90L/Rg9GC0YtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IuaGlkZUVycm9ycygpOyAvLyDQn9GA0L7QstC10YDRj9C10Lwg0LjQvdC/0YPRgtGLINC/0YDQuCDQvtGC0LrRgNGL0YLQuNC4XG59KTtcblxuLy8g0J7RgtC60YDRi9Cy0LDQtdC8INC/0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQsNCy0LDRgtCw0YDQsCDQv9GA0L7RhNC40LvRjyDQv9C+INC60LvQuNC60YMg0L3QsCDQsNCy0LDRgtCw0YBcbmJ1dHRvbkF2YXRhckVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBBdmF0YXIub3BlbigpOyAvLyDQntGC0LrRgNGL0LLQsNC10Lwg0L/QvtC/0LDQv1xuICBhdmF0YXJGb3JtVmFsaWRhdG9yLmhpZGVFcnJvcnMoKTsgLy8g0KHQutGA0YvQstCw0LXQvCDQvtGI0LjQsdC60Lgg0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0L/Rg9GB0YLQvtC5INGE0L7RgNC80YtcbiAgYXZhdGFyRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uU3RhdGUoKTsgLy8g0JLRi9C60LvRjtGH0LDQtdC8INC60L3QvtC/0LrRg1xufSk7XG5cbi8vINCe0YLQutGA0YvQstCw0LXQvCDQv9C+0L/QsNC/INC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbmJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cFdpdGhGb3JtQ2FyZC5vcGVuKCk7IC8vINCe0YLQutGA0YvQstCw0LXQvCDQv9C+0L/QsNC/XG4gIGNhcmRGb3JtVmFsaWRhdG9yLmhpZGVFcnJvcnMoKTsgLy8g0KHQutGA0YvQstCw0LXQvCDQvtGI0LjQsdC60Lgg0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0L/Rg9GB0YLQvtC5INGE0L7RgNC80YtcbiAgY2FyZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvblN0YXRlKCk7IC8vINCS0YvQutC70Y7Rh9Cw0LXQvCDQutC90L7Qv9C60YNcbn0pO1xuIl0sIm5hbWVzIjpbInNlbGVjdG9ycyIsInZhbGlkYXRpb25PYmplY3QiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInNlbGVjdG9yc09mQ2FyZCIsInJvb3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwb3B1cFByb2ZpbGUiLCJwcm9maWxlRm9ybSIsInByb2ZpbGVCdXR0b25FbGVtZW50IiwiYXZhdGFyRm9ybSIsImF2YXRhckZvcm1CdXR0b24iLCJwb3B1cENhcmQiLCJjYXJkRm9ybSIsImNhcmRGb3JtQnV0dG9uIiwiYnV0dG9uQXZhdGFyRWRpdCIsImJ1dHRvbkVkaXQiLCJidXR0b25BZGQiLCJwb3B1cEltZyIsImZvcm1FbGVtZW50UHJvZmlsZSIsImZvcm1FbGVtZW50Q2FyZCIsImNhcmRzQ29udGFpbmVyIiwiQXBpIiwidGhpcyIsIl90b2tlbiIsIl9iYXNlVXJsIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwibmFtZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXIiLCJsaW5rIiwiX2lkIiwicG9wdXBTZWxlY3RvcnMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiX3BvcHVwIiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfY2xvc2VQb3B1cEJ5Q2xpY2siLCJQb3B1cERlbGV0ZSIsIl9mb3JtIiwiYWN0aW9uIiwiX3N1Ym1pdEhhbmRsZXJEZWxldGUiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXBBdmF0YXIiLCJoYW5kbGVTdWJtaXRGb3JtIiwiX2hhbmRsZVN1Ym1pdEZvcm0iLCJfaW5wdXQiLCJfdXNlckF2YXRhciIsInNyYyIsInJlc2V0IiwiUG9wdXBXaXRoRm9ybSIsIl9mb3JtVmFsdWVzIiwiX2lucHV0TGlzdCIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwiZGF0YSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJQaWN0dXJlUG9wdXAiLCJfcG9wdXBJbWdQaWN0dXJlIiwiX2NhcHRpb25PZlBvcHVwSW1nIiwiYWx0IiwidGV4dENvbnRlbnQiLCJDYXJkIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZU9wZW5CaWdJbWFnZSIsImhhbmRsZU9wZW5Qb3B1cERlbGV0ZSIsImhhbmRsZUxpa2UiLCJsaWtlcyIsIl9uYW1lIiwiX2xpbmsiLCJfdGVtcGxhdGVTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZEVsZW1lbnQiLCJfZ2V0Q2FyZEVsZW1lbnQiLCJidXR0b25MaWtlIiwiX2J1dHRvbkRlbCIsImxpa2VDb3VudGVyIiwiZWxJbWciLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX3RvZ2dsZUxpa2UiLCJfaGFuZGxlSW1hZ2VDbGljayIsInRvZ2dsZSIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWwiLCJzb21lIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiX2hpZGVFcnJvciIsIl9zaG93RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uU3RhdGUiLCJlbmFibGVCdXR0b25TdGF0ZSIsIkFycmF5IiwiZnJvbSIsIl9idXR0b25FbGVtZW50IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIlNlY3Rpb24iLCJzZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckpvYlNlbGVjdG9yIiwiX3VzZXJOYW1lTm9kZSIsIl91c2VySm9iTm9kZSIsIl91c2VyTmFtZSIsIl91c2VySm9iIiwiX3VzZXJEYXRhIiwiYXBpIiwiY3JlYXRlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsImNhcmQiLCJkaXNsaWtlQ2FyZCIsImdldENhcmRJZCIsInJlc3VsdCIsImxlbmd0aCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImxpa2VDYXJkIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHNMaXN0IiwicmVuZGVySXRlbXMiLCJjYXJkc05vZGVMaXN0IiwiaSIsImdldEluaXRpYWxVc2VyIiwidXNlclJlc3VsdCIsImlzTGlrZWQiLCJhcnJheSIsImFycmF5T2ZMaWtlZElkIiwicHVzaCIsIm93bmVyIiwidXNlciIsInNldFVzZXJJbmZvIiwicG9wdXBBdmF0YXIiLCJlZGl0QXZhdGFyRnJvbUFwaSIsInBpY3R1cmVQb3B1cCIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwRGVsZXRlIiwic2V0U3VibWl0QWN0aW9uIiwiZGVsQ2FyZCIsImRlbGV0ZUNhcmQiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwiYnV0dG9uIiwidGV4dGluZyIsInRleHQiLCJwb3B1cFdpdGhGb3JtUHJvZmlsZSIsInNldFVzZXIiLCJnZXRJbnB1dFZhbHVlcyIsImZpbmFsbHkiLCJzZXRBdmF0YXIiLCJwb3B1cFdpdGhGb3JtQ2FyZCIsInNldENhcmQiLCJwcmVwZW5kSXRlbSIsImNhcmRFbGVtZW50IiwiYWRkSXRlbSIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImNhcmRGb3JtVmFsaWRhdG9yIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsInNldElucHV0VmFsdWVzIiwiZ2V0VXNlckluZm8iLCJoaWRlRXJyb3JzIl0sInNvdXJjZVJvb3QiOiIifQ==